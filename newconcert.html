<!DOCTYPE html>
<html lang="en">

<head>
    <title>Add New Headliner Show</title>
    <link href="newconcertstyle.css" type="text/css" rel="stylesheet" />
</head>

<body>
    <form id="newheadliner">
        <h1>Add Headliner Show</h1>
        <fieldset>
            <label>Headliner:</label>
            <input type="text" name="headliner">
        </fieldset>
        <fieldset>
            <label>City:</label>
            <input type="text" name="city">
        </fieldset>
        <fieldset>
            <label>Venue:</label>
            <input type="text" name="venue">
        </fieldset>
        <fieldset>
            <label>Date:</label>
            <input type="date" name="date" value="2018-08-02" min="1900-01-01" max="2020-12-31">
        </fieldset>

        <fieldset>
            <input type="submit" value="Add opening band" id="submitbutton">
            <div id="bandcontainer"></div>
            <input type="reset" value="Remove last band" id="resetbutton">
            <script>
                let container = document.getElementById('bandcontainer');
                let button = document.getElementById('submitbutton');
                let resetButton = document.getElementById('resetbutton');
                let i = 0;
                button.addEventListener('click', function () {
                    event.preventDefault();
                    i++;
                    let newForm = document.createElement('input');
                    newForm.setAttribute('type', 'text');
                    newForm.setAttribute('name', `openingBand${[i]}`);
                    newForm.setAttribute('placeholder', `Opening band ${[i]}`);
                    newForm.setAttribute('id', `${[i]}`);
                    newForm.classList = null;
                    newForm.classList.add('newBandForm');
                    container.appendChild(newForm);
                    // console.log(newForm.name);
                });

                resetButton.addEventListener('click', function () {
                    event.preventDefault();
                    container.removeChild(container.lastChild);
                })
            </script>
        </fieldset>

        <fieldset>
            <input type="submit" value="Create" id="submit">

        </fieldset>
    </form>
    <br>
    <div id="fill"></div>
    <script>
        // let subButton = document.getElementById('submit')
        let form = document.querySelector('form');
        let divList = document.getElementById('fill');
        form.onsubmit = function () {
            event.preventDefault();
            let formElements = document.getElementById("newheadliner").elements;
            let postData = {};
            for (let i = 0; i < formElements.length; i++) {
                if (formElements[i].type != "submit")//we dont want to include the submit-buttom
                    postData[formElements[i].name] = formElements[i].value;
            }
            let headliner = postData.headliner;
            let city = postData.city;
            let date = postData.date;
            let venue = postData.venue;
            let bands = container.children[0].value;

            if (bands == undefined || bands == null) {
                let concertText = `${headliner} - ${date} @ ${venue}, ${city}`;
                divList.textContent = concertText;
            }
            else {
                let concertText = `${headliner} w/ ${bands} - ${date} @ ${venue}, ${city}`;
                divList.textContent = concertText;
            }
            
        }


        function numberToDate(date) {
            let month;
            let day;
            let year;

         
        }
    </script>
</body>

</html>